# ═══════════════════════════════════════════════════════════════
# TOOL INITIALIZATION
# ═══════════════════════════════════════════════════════════════
# Initialize external tools (these can be slow, load last)

# Zoxide - smarter cd command
if command -v zoxide &> /dev/null; then
  eval "$(zoxide init zsh)"
fi

# TheFuck - corrects previous console command
if command -v thefuck &> /dev/null; then
  eval "$(thefuck --alias)"
fi

# ASDF - version manager
if [[ -f "${ASDF_DIR:-$HOME/.asdf}/asdf.sh" ]]; then
  source "${ASDF_DIR:-$HOME/.asdf}/asdf.sh"
fi

# FZF - fuzzy finder key bindings
if command -v fzf &> /dev/null; then
  # Use fd instead of find if available
  if command -v fd &> /dev/null; then
    export FZF_DEFAULT_COMMAND='fd --type f --hidden --follow --exclude .git'
    export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
    export FZF_ALT_C_COMMAND='fd --type d --hidden --follow --exclude .git'
  fi

  # FZF color scheme (OneDark theme)
  export FZF_DEFAULT_OPTS='
    --color=fg:#abb2bf,bg:#282c34,hl:#61afef
    --color=fg+:#abb2bf,bg+:#3e4452,hl+:#61afef
    --color=info:#98c379,prompt:#61afef,pointer:#e06c75
    --color=marker:#e5c07b,spinner:#61afef,header:#61afef
    --height 40% --layout=reverse --border
  '

  # Load fzf key bindings
  [[ -f ~/.fzf.zsh ]] && source ~/.fzf.zsh
fi

# Direnv - environment switcher
if command -v direnv &> /dev/null; then
  eval "$(direnv hook zsh)"
fi